!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.xmmClient=e()}}(function(){return function e(t,o,i){function r(s,a){if(!o[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){var o=t[s][1][e];return r(o?o:e)},d,d.exports,e,t,o,i)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});var n=e("babel-runtime/core-js/json/stringify"),s=r(n),a=e("babel-runtime/helpers/classCallCheck"),l=r(a),u=e("babel-runtime/helpers/createClass"),d=r(u),_=e("../utils/gmm-utils"),c=i(_),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,l.default)(this,e),this._model=void 0,this._modelResults=void 0,this._likelihoodWindow=t}return(0,d.default)(e,[{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=null,i=null;if(!this._model)return void console.log("no model loaded");try{c.gmmFilter(e,this._model,this._modelResults);var r=this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown",n=this._modelResults.smoothed_normalized_likelihoods.slice(0);i={likeliest:r,likeliestIndex:this._modelResults.likeliest,likelihoods:n},this._model.shared_parameters.bimodal&&(i.outputValues=this._modelResults.output_values.slice(0),i.outputCovariance=this.modelResults.output_covariance.slice(0))}catch(e){o="problem occured during filtering : "+e}return t&&t(o,i),i}},{key:"getLikelihoodWindow",value:function(){return this._likelihoodWindow}},{key:"setLikelihoodWindow",value:function(e){this._likelihoodWindow=e,this._updateLikelihoodWindow()}},{key:"_updateLikelihoodWindow",value:function(){if(void 0!==this._model)for(var e=this._modelResults.singleClassGmmModelResults,t=0;t<this._model.models.length;t++){e[t].likelihood_buffer=new Array(this._likelihoodWindow);for(var o=0;o<this._likelihoodWindow;o++)e[t].likelihood_buffer[o]=1/this._likelihoodWindow}}},{key:"getModel",value:function(){if(this._model)return JSON.parse((0,s.default)(this._model))}},{key:"setModel",value:function(e){this._setModel(e)}},{key:"_setModel",value:function(e){if(this._model=void 0,this._modelResults=void 0,void 0!==e.models){this._model=e;var t=this._model,o=t.models.length;this._modelResults={instant_likelihoods:new Array(o),smoothed_log_likelihoods:new Array(o),smoothed_likelihoods:new Array(o),instant_normalized_likelihoods:new Array(o),smoothed_normalized_likelihoods:new Array(o),likeliest:-1,singleClassGmmModelResults:[]};var i=t.shared_parameters,r=i.dimension-i.dimension_input;this._modelResults.output_values=new Array(r);for(var n=0;n<r;n++)this._modelResults.output_values[n]=0;var s=void 0;s=0==t.configuration.default_parameters.covariance_mode?r*r:r,this._modelResults.output_covariance=new Array(s);for(var a=0;a<r;a++)this._modelResults.output_covariance[a]=0;for(var l=0;l<o;l++){this._modelResults.instant_likelihoods[l]=0,this._modelResults.smoothed_log_likelihoods[l]=0,this._modelResults.smoothed_likelihoods[l]=0,this._modelResults.instant_normalized_likelihoods[l]=0,this._modelResults.smoothed_normalized_likelihoods[l]=0;var u={instant_likelihood:0,log_likelihood:0};u.likelihood_buffer=new Array(this._likelihoodWindow);for(var d=0;d<this._likelihoodWindow;d++)u.likelihood_buffer[d]=1/this._likelihoodWindow;u.likelihood_buffer_index=0,u.beta=new Array(t.models[l].components.length);for(var _=0;_<u.beta.length;_++)u.beta[_]=1/u.beta.length;u.output_values=this._modelResults.output_values.slice(0),u.output_covariance=this._modelResults.output_covariance.slice(0),this._modelResults.singleClassGmmModelResults.push(u)}}}},{key:"getLikeliestLabel",value:function(){return this._modelResults&&this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown"}},{key:"getNumberOfClasses",value:function(){return this._model?this._model.models.length:0}},{key:"getRegressionVectorSize",value:function(){if(this._model){var e=this._model.shared_parameters;return e.bimodal?e.dimension-e.dimension_input:0}return 0}}]),e}();o.default=f},{"../utils/gmm-utils":6,"babel-runtime/core-js/json/stringify":9,"babel-runtime/helpers/classCallCheck":14,"babel-runtime/helpers/createClass":15}],2:[function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});var n=e("babel-runtime/core-js/json/stringify"),s=r(n),a=e("babel-runtime/helpers/classCallCheck"),l=r(a),u=e("babel-runtime/helpers/createClass"),d=r(u),_=e("../utils/hhmm-utils"),c=i(_),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,l.default)(this,e),this._likelihoodWindow=t,this._model=void 0,this._modelResults=void 0}return(0,d.default)(e,[{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=null,i=null;if(this._model)try{c.hhmmFilter(e,this._model,this._modelResults);var r=this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown",n=this._modelResults.smoothed_normalized_likelihoods.slice(0);i={likeliest:r,likeliestIndex:this._modelResults.likeliest,likelihoods:n,timeProgressions:new Array(this._model.models.length),alphas:new Array(this._model.models.length)};for(var s=0;s<this._model.models.length;s++)i.timeProgressions[s]=this._modelResults.singleClassHmmModelResults[s].progress,this._model.configuration.default_parameters.hierarchical?i.alphas[s]=this._modelResults.singleClassHmmModelResults[s].alpha_h[0]:i.alphas[s]=this._modelResults.singleClassHmmModelResults[s].alpha[0];this._model.shared_parameters.bimodal&&(i.outputValues=this._modelResults.output_values.slice(0),i.outputCovariance=this._modelResults.output_covariance.slice(0))}catch(e){o="problem occured during filtering : "+e}else o="no model loaded yet";return t&&t(o,i),i}},{key:"reset",value:function(){this._model&&this._setModel(this._model)}},{key:"getLikelihoodWindow",value:function(){return this._likelihoodWindow}},{key:"setLikelihoodWindow",value:function(e){this._likelihoodWindow=e,this._updateLikelihoodWindow()}},{key:"_updateLikelihoodWindow",value:function(){if(void 0!==this._model)for(var e=this._modelResults.singleClassHmmModelResults,t=0;t<this._model.models.length;t++){e[t].likelihood_buffer=new Array(this._likelihoodWindow);for(var o=0;o<this._likelihoodWindow;o++)e[t].likelihood_buffer[o]=1/this._likelihoodWindow}}},{key:"getModel",value:function(){if(this._model)return JSON.parse((0,s.default)(this._model))}},{key:"setModel",value:function(e){this._setModel(e)}},{key:"_setModel",value:function(e){if(this._model=void 0,this._modelResults=void 0,e&&void 0!==e.models){this._model=e;var t=this._model,o=t.models.length;this._modelResults={instant_likelihoods:new Array(o),smoothed_log_likelihoods:new Array(o),smoothed_likelihoods:new Array(o),instant_normalized_likelihoods:new Array(o),smoothed_normalized_likelihoods:new Array(o),likeliest:-1,frontier_v1:new Array(o),frontier_v2:new Array(o),forward_initialized:!1,singleClassHmmModelResults:[]};var i=t.shared_parameters,r=i.dimension-i.dimension_input;this._modelResults.output_values=new Array(r);for(var n=0;n<r;n++)this._modelResults.output_values[n]=0;var s=void 0;s=0==t.configuration.default_parameters.covariance_mode?r*r:r,this._modelResults.output_covariance=new Array(s);for(var a=0;a<r;a++)this._modelResults.output_covariance[a]=0;for(var l=0;l<o;l++){this._modelResults.instant_likelihoods[l]=0,this._modelResults.smoothed_log_likelihoods[l]=0,this._modelResults.smoothed_likelihoods[l]=0,this._modelResults.instant_normalized_likelihoods[l]=0,this._modelResults.smoothed_normalized_likelihoods[l]=0;for(var u=t.models[l].parameters.states,d=new Array(3),_=0;_<3;_++){d[_]=new Array(u);for(var c=0;c<u;c++)d[_][c]=0}for(var f=new Array(u),h=0;h<u;h++)f[h]=0;for(var m=new Array(this._likelihoodWindow),p=0;p<this._likelihoodWindow;p++)m[p]=0;var v={hierarchical:t.configuration.default_parameters.hierarchical,instant_likelihood:0,log_likelihood:0,likelihood_buffer:m,likelihood_buffer_index:0,progress:0,exit_likelihood:0,exit_ratio:0,likeliest_state:-1,previous_alpha:f.slice(0),alpha:f,alpha_h:d,prior:new Array(u),transition:new Array(u),window_minindex:0,window_maxindex:0,window_normalization_constant:0,forward_initialized:!1,singleClassGmmModelResults:[]};v.output_values=this._modelResults.output_values.slice(0),v.output_covariance=this._modelResults.output_covariance.slice(0);for(var b=0;b<u;b++){var g={instant_likelihood:0,log_likelihood:0};g.beta=new Array(this._model.models[l].parameters.gaussians);for(var y=0;y<g.beta.length;y++)g.beta[y]=1/g.beta.length;g.output_values=v.output_values.slice(0),g.output_covariance=v.output_covariance.slice(0),v.singleClassGmmModelResults.push(g)}this._modelResults.singleClassHmmModelResults.push(v)}}}},{key:"getLikeliestLabel",value:function(){return this._modelResults&&this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown"}},{key:"getNumberOfClasses",value:function(){return this._model?this._model.models.length:0}},{key:"getRegressionVectorSize",value:function(){if(this._model){var e=this._model.shared_parameters;return e.bimodal?e.dimension-e.dimension_input:0}return 0}}]),e}();o.default=f},{"../utils/hhmm-utils":7,"babel-runtime/core-js/json/stringify":9,"babel-runtime/helpers/classCallCheck":14,"babel-runtime/helpers/createClass":15}],3:[function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});var r=e("./gmm/gmm-decoder");Object.defineProperty(o,"GmmDecoder",{enumerable:!0,get:function(){return i(r).default}});var n=e("./hhmm/hhmm-decoder");Object.defineProperty(o,"HhmmDecoder",{enumerable:!0,get:function(){return i(n).default}});var s=e("./set/xmm-phrase");Object.defineProperty(o,"PhraseMaker",{enumerable:!0,get:function(){return i(s).default}});var a=e("./set/xmm-set");Object.defineProperty(o,"SetMaker",{enumerable:!0,get:function(){return i(a).default}})},{"./gmm/gmm-decoder":1,"./hhmm/hhmm-decoder":2,"./set/xmm-phrase":4,"./set/xmm-set":5}],4:[function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});var r=e("babel-runtime/helpers/typeof"),n=i(r),s=e("babel-runtime/core-js/get-iterator"),a=i(s),l=e("babel-runtime/core-js/number/is-integer"),u=i(l),d=e("babel-runtime/helpers/classCallCheck"),_=i(d),c=e("babel-runtime/helpers/createClass"),f=i(c),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_.default)(this,e);var o={bimodal:!1,dimension:1,dimensionInput:0,columnNames:[""],label:""};this._config=o,this._setConfig(t),this.reset()}return(0,f.default)(e,[{key:"getConfig",value:function(){return this._config}},{key:"setConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setConfig(e)}},{key:"_setConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)"bimodal"===t&&"boolean"==typeof e[t]?this._config[t]=e[t]:"dimension"===t&&(0,u.default)(e[t])?this._config[t]=e[t]:"dimensionInput"===t&&(0,u.default)(e[t])?this._config[t]=e[t]:"columnNames"===t&&Array.isArray(e[t])?this._config[t]=e[t].slice(0):"label"===t&&"string"==typeof e[t]&&(this._config[t]=e[t])}},{key:"addObservation",value:function(e){var t="Bad input length: observation length must match phrase dimension",o="Bad data type: all observation values must be numbers";if(e.length!==this._config.dimension||"number"==typeof e&&1!==this._config.dimension)throw new Error(t);if(Array.isArray(e)){var i=!0,r=!1,s=void 0;try{for(var l,u=(0,a.default)(e);!(i=(l=u.next()).done);i=!0){var d=l.value;if("number"!=typeof d)throw new Error(o)}}catch(e){r=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw s}}}else if((0,n.default)("number"!==e))throw new Error(o);this._config.bimodal?(this._dataIn=this._dataIn.concat(e.slice(0,this._config.dimensionInput)),this._dataOut=this._dataOut.concat(e.slice(this._config.dimensionInput))):Array.isArray(e)?this._data=this._data.concat(e):this._data.push(e)}},{key:"getPhrase",value:function(){return this._getPhrase()}},{key:"_getPhrase",value:function(){return{bimodal:this._config.bimodal,column_names:this._config.columnNames,dimension:this._config.dimension,dimension_input:this._config.dimensionInput,label:this._config.label,data:this._data.slice(0),data_input:this._dataIn.slice(0),data_output:this._dataOut.slice(0),length:this._config.bimodal?this._dataIn.length/this._config.dimensionInput:this._data.length/this._config.dimension}}},{key:"reset",value:function(){this._data=[],this._dataIn=[],this._dataOut=[]}}]),e}();o.default=h},{"babel-runtime/core-js/get-iterator":8,"babel-runtime/core-js/number/is-integer":10,"babel-runtime/helpers/classCallCheck":14,"babel-runtime/helpers/createClass":15,"babel-runtime/helpers/typeof":16}],5:[function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});var r=e("babel-runtime/core-js/number/is-integer"),n=i(r),s=e("babel-runtime/core-js/json/stringify"),a=i(s),l=e("babel-runtime/core-js/get-iterator"),u=i(l),d=e("babel-runtime/helpers/classCallCheck"),_=i(d),c=e("babel-runtime/helpers/createClass"),f=i(c),h=function(){function e(){(0,_.default)(this,e),this._config={},this._phrases=[]}return(0,f.default)(e,[{key:"getSize",value:function(){return this._phrases.length}},{key:"addPhrase",value:function(e){if(0===this._phrases.length)this._setConfigFrom(e);else if(!this._checkCompatibility(e))throw new Error("Bad phrase format: added phrase must match current set configuration");this._phrases.push(e)}},{key:"addTrainingSet",value:function(e){if(0===this._phrases.length)this._setConfigFrom(e);else if(!this._checkCompatibility(e))throw new Error("Bad set format: added set must match current set configuration");var t=e.phrases,o=!0,i=!1,r=void 0;try{for(var n,s=(0,u.default)(t);!(o=(n=s.next()).done);o=!0){var a=n.value;this._phrases.push(a)}}catch(e){i=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw r}}}},{key:"getPhrase",value:function(e){return e>-1&&e<this._phrases.length?JSON.parse(JSON.srtingify(this._phrases[e])):null}},{key:"removePhrase",value:function(e){e>-1&&e<this._phrases.length&&this._phrases.splice(e,1)}},{key:"getPhrasesOfLabel",value:function(e){var t={};for(var o in this._config)t[o]=this._config[o];t.phrases=[];var i=0,r=!0,n=!1,s=void 0;try{for(var l,d=(0,u.default)(this._phrases);!(r=(l=d.next()).done);r=!0){var _=l.value;if(_.label===e){var c=JSON.parse((0,a.default)(_));c.index=i++,t.phrases.push(c)}}}catch(e){n=!0,s=e}finally{try{!r&&d.return&&d.return()}finally{if(n)throw s}}return t}},{key:"removePhrasesOfLabel",value:function(e){for(var t=0;t<this._phrases.length;t++)this._phrases[t].label===e&&this.phrases.splice(t,1)}},{key:"getTrainingSet",value:function(){var e={};for(var t in this._config)e[t]=this._config[t];e.phrases=[];var o=0,i=!0,r=!1,n=void 0;try{for(var s,l=(0,u.default)(this._phrases);!(i=(s=l.next()).done);i=!0){var d=s.value,_=JSON.parse((0,a.default)(d));_.index=o++,e.phrases.push(_)}}catch(e){r=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw n}}return e}},{key:"clear",value:function(){this._config={},this._phrases=[]}},{key:"_setConfigFrom",value:function(e){for(var t in e)"bimodal"===t&&"boolean"==typeof e.bimodal?this._config[t]=e[t]:"column_names"===t&&Array.isArray(e[t])?this._config[t]=e[t].slice(0):"dimension"===t&&(0,n.default)(e[t])?this._config[t]=e[t]:"dimension_input"===t&&(0,n.default)(e[t])&&(this._config[t]=e[t])}},{key:"_checkCompatibility",value:function(e){if(e.bimodal!==this._config.bimodal||e.dimension!==this._config.dimension||e.dimension_input!==this._config.dimension_input)return!1;var t=e.column_names,o=this._config.column_names;if(t.length!==o.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==o[i])return!1;return!0}}]),e}();o.default=h},{"babel-runtime/core-js/get-iterator":8,"babel-runtime/core-js/json/stringify":9,"babel-runtime/core-js/number/is-integer":10,"babel-runtime/helpers/classCallCheck":14,"babel-runtime/helpers/createClass":15}],6:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=o.gmmComponentRegression=function(e,t,o){var i=o.dimension,r=o.dimension_input,n=i-r;if(t=new Array(n),0===o.covariance_mode)for(var s=0;s<n;s++){t[s]=o.mean[r+s];for(var a=0;a<r;a++){for(var l=0,u=0;u<r;u++)l+=o.inverse_covariance_input[a*r+u]*(e[u]-o.mean[u]);t[s]+=o.covariance[(s+r)*i+a]*l}}else for(var d=0;d<n;d++)t[d]=o.covariance[d+r]},r=o.gmmComponentLikelihood=function(e,t){var o=0;if(0===t.covariance_mode)for(var i=0;i<t.dimension;i++){for(var r=0,n=0;n<t.dimension;n++)r+=t.inverse_covariance[i*t.dimension+n]*(e[n]-t.mean[n]);o+=(e[i]-t.mean[i])*r}else for(var s=0;s<t.dimension;s++)o+=t.inverse_covariance[s]*(e[s]-t.mean[s])*(e[s]-t.mean[s]);var a=Math.exp(-.5*o)/Math.sqrt(t.covariance_determinant*Math.pow(2*Math.PI,t.dimension));return(a<1e-180||isNaN(a)||isNaN(Math.abs(a)))&&(a=1e-180),a},n=o.gmmComponentLikelihoodInput=function(e,t){var o=0;if(0===t.covariance_mode)for(var i=0;i<t.dimension_input;i++){for(var r=0,n=0;n<t.dimension_input;n++)r+=t.inverse_covariance_input[i*t.dimension_input+n]*(e[n]-t.mean[n]);o+=(e[i]-t.mean[i])*r}else for(var s=0;s<t.dimension_input;s++)o+=t.inverse_covariance_input[s]*(e[s]-t.mean[s])*(e[s]-t.mean[s]);var a=Math.exp(-.5*o)/Math.sqrt(t.covariance_determinant_input*Math.pow(2*Math.PI,t.dimension_input));return(a<1e-180||isNaN(a)||isNaN(Math.abs(a)))&&(a=1e-180),a},s=o.gmmComponentLikelihoodBimodal=function(e,t,o){var i=o.dimension,r=o.dimension_input,n=i-r,s=0;if(0===o.covariance_mode)for(var a=0;a<i;a++){for(var l=0,u=0;u<o.dimension_input;u++)l+=o.inverse_covariance[a*i+u]*(e[u]-o.mean[u]);for(var d=0;d<n;d++)l+=o.inverse_covariance[a*i+r+d]*(t[d]-o.mean[r+d]);s+=a<r?(e[a]-o.mean[a])*l:(t[a-r]-o.mean[a])*l}else{for(var _=0;_<r;_++)s+=o.inverse_covariance[_]*(e[_]-o.mean[_])*(e[_]-o.mean[_]);for(var c=o.dimension_input;c<o.dimension;c++){var f=(t[c-r]-o.mean[c])*(t[c-r]-o.mean[c]);s+=o.inverse_covariance[c]*f}}var h=Math.exp(-.5*s)/Math.sqrt(o.covariance_determinant*Math.pow(2*Math.PI,o.dimension));return(h<1e-180||isNaN(h)||isNaN(Math.abs(h)))&&(h=1e-180),h},a=(o.gmmRegression=function(e,t,o){var r=t.components[0].dimension,n=t.components[0].dimension_input,s=r-n;o.output_values=new Array(s);for(var a=0;a<s;a++)o.output_values[a]=0;var l=void 0;l=0===t.parameters.covariance_mode?s*s:s,o.output_covariance=new Array(l);for(var u=0;u<l;u++)o.output_covariance[u]=0;for(var d=void 0,_=0;_<t.components.length;_++){i(e,d,t.components[_]);for(var c=o.beta[_]*o.beta[_],f=0;f<s;f++)if(o.output_values[f]+=o.beta[_]*d[f],0===t.parameters.covariance_mode)for(var h=0;h<s;h++){var m=f*s+h;o.output_covariance[m]+=c*t.components[_].output_covariance[m]}else o.output_covariance[f]+=c*t.components[_].output_covariance[f]}},o.gmmObsProb=function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=o.mixture_coeffs,s=o.components,a=0;if(i<0)for(var l=0;l<s.length;l++)a+=e(t,o,l);else a=n[i]*r(t,s[i]);return a}),l=o.gmmObsProbInput=function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=o.mixture_coeffs,s=o.components,a=0;if(i<0)for(var l=0;l<s.length;l++)a+=e(t,o,l);else a=r[i]*n(t,s[i]);return a},u=o.gmmObsProbBimodal=function e(t,o,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,n=i.mixture_coeffs,a=i.components,l=0;if(r<0)for(var u=0;u<a.length;u++)l+=e(t,o,i,u);else l=n[r]*s(t,o,a[r]);return l},d=o.gmmLikelihood=function(e,t,o){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=t.mixture_coeffs,n=t.components,s=o,d=0,_=0;_<n.length;_++)singleClassGmmModel.components[_].bimodal?0===i.length?s.beta[_]=l(e,t,_):s.beta[_]=u(e,i,t,_):s.beta[_]=a(e,t,_),d+=s.beta[_];for(var c=0;c<r.length;c++)s.beta[c]/=d;return s.instant_likelihood=d,s.likelihood_buffer[s.likelihood_buffer_index]=d,s.likelihood_buffer_index=(s.likelihood_buffer_index+1)%s.likelihood_buffer.length,s.log_likelihood=s.likelihood_buffer.reduce(function(e,t){return e+t},0),s.log_likelihood/=s.likelihood_buffer.length,d};o.gmmFilter=function(e,t,o){for(var i=t.models,r=o,n=0,s=0,a=0,l=0;l<i.length;l++){var u=r.singleClassGmmModelResults[l];r.instant_likelihoods[l]=d(e,i[l],u),r.smoothed_log_likelihoods[l]=u.log_likelihood,r.smoothed_likelihoods[l]=Math.exp(r.smoothed_log_likelihoods[l]),r.instant_normalized_likelihoods[l]=r.instant_likelihoods[l],r.smoothed_normalized_likelihoods[l]=r.smoothed_likelihoods[l],s+=r.instant_normalized_likelihoods[l],a+=r.smoothed_normalized_likelihoods[l],(0==l||r.smoothed_log_likelihoods[l]>n)&&(n=r.smoothed_log_likelihoods[l],r.likeliest=l)}for(var _=0;_<i.length;_++)r.instant_normalized_likelihoods[_]/=s,r.smoothed_normalized_likelihoods[_]/=a;var c=t.shared_parameters,f=t.configuration;if(c.bimodal){var h=c.dimension,m=c.dimension_input,p=h-m;if(0===f.multiClass_regression_estimator)r.output_values=r.singleClassModelResults[r.likeliest].output_values,r.output_covariance=r.singleClassModelResults[r.likeliest].output_covariance;else{r.output_values=new Array(p);for(var v=0;v<p;v++)r.output_values[v]=0;var b=void 0;b=0==f.default_parameters.covariance_mode?p*p:p,r.output_covariance=new Array(b);for(var g=0;g<b;g++)r.output_covariance[g]=0;for(var y=0;y<i.length;y++)for(var k=r.smoothed_normalized_likelihoods[y],w=r.singleClassGmmModelResults[y],j=0;j<p;y++)if(r.output_values[j]+=k*w.output_values[j],0===f.default_parameters.covariance_mode)for(var x=0;x<p;x++){var M=j*p+x;r.output_covariance[M]+=k*w.output_covariance[M]}else r.output_covariance[j]+=k*w.output_covariance[j]}}}},{}],7:[function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(o,"__esModule",{value:!0}),o.hhmmFilter=o.hhmmUpdateResults=o.hhmmForwardUpdate=o.hhmmForwardInit=o.hhmmLikelihoodAlpha=o.hmmFilter=o.hmmUpdateResults=o.hmmUpdateAlphaWindow=o.hmmForwardUpdate=o.hmmForwardInit=o.hmmRegression=void 0;var r=e("./gmm-utils"),n=i(r),s=o.hmmRegression=function(e,t,o){var i=t.states[0].components[0].dimension,r=t.states[0].components[0].dimension_input,s=i-r,a=void 0;a=0===t.states[0].components[0].covariance_mode?s*s:s,o.output_values=new Array(s);for(var l=0;l<s;l++)o.output_values[l]=0;o.output_covariance=new Array(a);for(var u=0;u<a;u++)o.output_covariance[u]=0;if(2===t.parameters.regression_estimator)return n.gmmLikelihood(e,t.states[o.likeliest_state],o.singleClassGmmModelResults[o.likeliest_state]),n.gmmRegression(e,t.states[o.likeliest_state],o.singleClassGmmModelResults[o.likeliest_state]),void(o.output_values=t.states[o.likeliest_state].output_values.slice(0));var d=0==t.parameters.regression_estimator?0:o.window_minindex,_=0==t.parameters.regression_estimator?t.states.length:o.window_maxindex,c=0==t.parameters.regression_estimator?1:o.window_normalization_constant;c<=0&&(c=1);for(var f=d;f<_;f++){n.gmmLikelihood(e,t.states[f],o.singleClassGmmModelResults[f]),n.gmmRegression(e,t.states[f],o.singleClassGmmModelResults[f]);for(var h=o.singleClassGmmModelResults[f].output_values.slice(0),m=0;m<s;m++)if(o.hierarchical)if(o.output_values[m]+=(o.alpha_h[0][f]+o.alpha_h[1][f])*h[m]/c,0===t.parameters.covariance_mode)for(var p=0;p<s;p++)o.output_covariance[m*s+p]+=(o.alpha_h[0][f]+o.alpha_h[1][f])*(o.alpha_h[0][f]+o.alpha_h[1][f])*o.singleClassGmmModelResults[f].output_covariance[m*s+p]/c;else o.output_covariance[m]+=(o.alpha_h[0][f]+o.alpha_h[1][f])*(o.alpha_h[0][f]+o.alpha_h[1][f])*o.singleClassGmmModelResults[f].output_covariance[m]/c;else if(o.output_values[m]+=o.alpha[f]*h[m]/c,0===t.parameters.covariance_mode)for(var v=0;v<s;v++)o.output_covariance[m*s+v]+=o.alpha[f]*o.alpha[f]*o.singleClassGmmModelResults[f].output_covariance[m*s+v]/c;else o.output_covariance[m]+=o.alpha[f]*o.alpha[f]*o.singleClassGmmModelResults.output_covariance[m]/c}},a=o.hmmForwardInit=function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=t.parameters.states,s=0;if(0===t.parameters.transition_mode)for(var a=0;a<r;a++)t.states[a].components[0].bimodal?i.length>0?o.alpha[a]=t.prior[a]*n.gmmObsProbBimodal(e,i,t.states[a]):o.alpha[a]=t.prior[a]*n.gmmObsProbInput(e,t.states[a]):o.alpha[a]=t.prior[a]*n.gmmObsProb(e,t.states[a]),s+=o.alpha[a];else{for(var l=0;l<o.alpha.length;l++)o.alpha[l]=0;t.states[0].components[0].bimodal?i.length>0?o.alpha[0]=n.gmmObsProbBimodal(e,i,t.states[0]):o.alpha[0]=n.gmmObsProbInput(e,t.states[0]):o.alpha[0]=n.gmmObsProb(e,t.states[0]),s+=o.alpha[0]}if(s>0){for(var u=0;u<r;u++)o.alpha[u]/=s;return 1/s}for(var d=0;d<r;d++)o.alpha[d]=1/r;return 1},l=o.hmmForwardUpdate=function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=t.parameters.states,s=0;o.previous_alpha=o.alpha.slice(0);for(var a=0;a<r;a++){if(o.alpha[a]=0,0===t.parameters.transition_mode)for(var l=0;l<r;l++)o.alpha[a]+=o.previous_alpha[l]*o.transition[l*r+a];else o.alpha[a]+=o.previous_alpha[a]*o.transition[2*a],a>0?o.alpha[a]+=o.previous_alpha[a-1]*o.transition[2*(a-1)+1]:o.alpha[0]+=o.previous_alpha[r-1]*o.transition[2*r-1];t.states[a].components[0].bimodal?i.length>0?o.alpha[a]*=n.gmmObsProbBimodal(e,i,t.states[a]):o.alpha[a]*=n.gmmObsProbInput(e,t.states[a]):o.alpha[a]*=n.gmmObsProb(e,t.states[a]),s+=o.alpha[a]}if(s>1e-300){for(var u=0;u<r;u++)o.alpha[u]/=s;return 1/s}return 0},u=o.hmmUpdateAlphaWindow=function(e,t){var o=e.parameters.states;t.likeliest_state=0;var i=void 0;i=e.parameters.hierarchical?t.alpha_h[0][0]+t.alpha_h[1][0]:t.alpha[0];for(var r=1;r<o;r++)e.parameters.hierarchical?t.alpha_h[0][r]+t.alpha_h[1][r]>i&&(i=t.alpha_h[0][r]+t.alpha_h[1][r],t.likeliest_state=r):t.alpha[r]>i&&(i=t.alpha[0],t.likeliest_state=r);t.window_minindex=t.likeliest_state-Math.floor(o/2),t.window_maxindex=t.likeliest_state+Math.floor(o/2),t.window_minindex=t.window_minindex>=0?t.window_minindex:0,t.window_maxindex=t.window_maxindex<=o?t.window_maxindex:o,t.window_normalization_constant=0;for(var n=t.window_minindex;n<t.window_maxindex;n++)e.parameters.hierarchical?t.window_normalization_constant+=t.alpha_h[0][n]+t.alpha_h[1][n]:t.window_normalization_constant+=t.alpha[n]},d=o.hmmUpdateResults=function(e,t){var o=t.likelihood_buffer.length;t.likelihood_buffer[t.likelihood_buffer_index]=Math.log(t.instant_likelihood),t.likelihood_buffer_index=(t.likelihood_buffer_index+1)%o,t.log_likelihood=0;for(var i=0;i<o;i++)t.log_likelihood+=t.likelihood_buffer[i];t.log_likelihood/=o,t.progress=0;for(var r=t.window_minindex;r<t.window_maxindex;r++)e.parameters.hierarchical?t.progress+=(t.alpha_h[0][r]+t.alpha_h[1][r]+t.alpha_h[2][r])*r/t.window_normalization_constant:t.progress+=t.alpha[r]*r/t.window_normalization_constant;t.progress/=e.parameters.states-1},_=o.hmmFilter=function(e,t,o){var i=0;if(o.forward_initialized)i=l(e,t,o);else{for(var r=0;r<o.likelihood_buffer.length;r++)o.likelihood_buffer[r]=0;i=a(e,t,o),o.forward_initialized=!0}return o.instant_likelihood=1/i,u(t,o),d(t,o),t.states[0].components[0].bimodal&&s(e,t,o),o.instant_likelihood},c=o.hhmmLikelihoodAlpha=function(e,t,o,i){if(e<0)for(var r=0;r<o.models.length;r++){t[r]=0;for(var n=0;n<3;n++)for(var s=0;s<o.models[r].parameters.states;s++)t[r]+=i.singleClassHmmModelResults[r].alpha_h[n][s]}else for(var a=0;a<o.models.length;a++){t[a]=0;for(var l=0;l<o.models[a].parameters.states;l++)t[a]+=i.singleClassHmmModelResults[a].alpha_h[e][l]}},f=o.hhmmForwardInit=function(e,t,o){for(var i=0,r=0;r<t.models.length;r++){for(var s=t.models[r],a=s.parameters.states,l=o.singleClassHmmModelResults[r],u=0;u<3;u++){l.alpha_h[u]=new Array(a);for(var d=0;d<a;d++)l.alpha_h[u][d]=0}if(0==s.parameters.transition_mode)for(var _=0;_<a;_++)t.shared_parameters.bimodal?l.alpha_h[0][_]=s.prior[_]*n.gmmObsProbInput(e,s.states[_]):l.alpha_h[0][_]=s.prior[_]*n.gmmObsProb(e,s.states[_]),l.instant_likelihood+=l.alpha_h[0][_];else l.alpha_h[0][0]=t.prior[r],t.shared_parameters.bimodal?l.alpha_h[0][0]*=n.gmmObsProbInput(e,s.states[0]):l.alpha_h[0][0]*=n.gmmObsProb(e,s.states[0]),l.instant_likelihood=l.alpha_h[0][0];i+=l.instant_likelihood}for(var c=0;c<t.models.length;c++)for(var f=t.models[c].parameters.states,h=0;h<3;h++)for(var m=0;m<f;m++)o.singleClassHmmModelResults[c].alpha_h[h][m]/=i;o.forward_initialized=!0},h=o.hhmmForwardUpdate=function(e,t,o){var i=t.models.length,r=0,s=0,a=void 0;c(1,o.frontier_v1,t,o),c(2,o.frontier_v2,t,o);for(var l=0;l<i;l++){var u=t.models[l],d=u.parameters.states,_=o.singleClassHmmModelResults[l];a=new Array(d);for(var f=0;f<d;f++)a[f]=0;if(0==u.parameters.transition_mode)for(var h=0;h<d;h++){for(var m=0;m<d;m++)a[h]+=u.transition[m*d+h]/(1-u.exitProbabilities[m])*_.alpha_h[0][m];for(var p=0;p<i;p++)a[h]+=u.prior[h]*(o.frontier_v1[p]*t.transition[p][l]+o.frontier_v2[p]*t.prior[l])}else{a[0]=u.transition[0]*_.alpha_h[0][0];for(var v=0;v<i;v++)a[0]+=o.frontier_v1[v]*t.transition[v][l]+o.frontier_v2[v]*t.prior[l];for(var b=1;b<d;b++)a[b]+=u.transition[2*b]/(1-u.exitProbabilities[b])*_.alpha_h[0][b],a[b]+=u.transition[2*(b-1)+1]/(1-u.exitProbabilities[b-1])*_.alpha_h[0][b-1];for(var g=0;g<3;g++)for(var y=0;y<d;y++)_.alpha_h[g][y]=0}_.exit_likelihood=0,_.instant_likelihood=0;for(var k=0;k<d;k++)s=t.shared_parameters.bimodal?n.gmmObsProbInput(e,u.states[k])*a[k]:n.gmmObsProb(e,u.states[k])*a[k],_.alpha_h[2][k]=t.exit_transition[l]*u.exitProbabilities[k]*s,_.alpha_h[1][k]=(1-t.exit_transition[l])*u.exitProbabilities[k]*s,_.alpha_h[0][k]=(1-u.exitProbabilities[k])*s,_.exit_likelihood+=_.alpha_h[1][k]+_.alpha_h[2][k],_.instant_likelihood+=_.alpha_h[0][k]+_.alpha_h[1][k]+_.alpha_h[2][k],r+=s;_.exit_ratio=_.exit_likelihood/_.instant_likelihood}for(var w=0;w<i;w++)for(var j=0;j<3;j++)for(var x=0;x<t.models[w].parameters.states;x++)o.singleClassHmmModelResults[w].alpha_h[j][x]/=r},m=o.hhmmUpdateResults=function(e,t){for(var o=0,i=0,r=0,n=0;n<e.models.length;n++){var s=t.singleClassHmmModelResults[n];t.instant_likelihoods[n]=s.instant_likelihood,t.smoothed_log_likelihoods[n]=s.log_likelihood,t.smoothed_likelihoods[n]=Math.exp(t.smoothed_log_likelihoods[n]),t.instant_normalized_likelihoods[n]=t.instant_likelihoods[n],t.smoothed_normalized_likelihoods[n]=t.smoothed_likelihoods[n],i+=t.instant_normalized_likelihoods[n],r+=t.smoothed_normalized_likelihoods[n],(0==n||t.smoothed_log_likelihoods[n]>o)&&(o=t.smoothed_log_likelihoods[n],t.likeliest=n)}for(var a=0;a<e.models.length;a++)t.instant_normalized_likelihoods[a]/=i,t.smoothed_normalized_likelihoods[a]/=r};o.hhmmFilter=function(e,t,o){if(t.configuration.default_parameters.hierarchical)o.forward_initialized?h(e,t,o):f(e,t,o);else for(var i=0;i<t.models.length;i++)o.instant_likelihoods[i]=_(e,t,o);for(var r=0;r<t.models.length;r++)u(t.models[r],o.singleClassHmmModelResults[r]),d(t.models[r],o.singleClassHmmModelResults[r]);if(m(t,o),t.shared_parameters.bimodal){for(var n=t.shared_parameters.dimension,a=t.shared_parameters.dimension_input,l=n-a,c=0;c<t.models.length;c++)s(e,t.models[c],o.singleClassHmmModelResults[c]);
if(0===t.configuration.multiClass_regression_estimator)o.output_values=o.singleClassHmmModelResults[o.likeliest].output_values.slice(0),o.output_covariance=o.singleClassHmmModelResults[o.likeliest].output_covariance.slice(0);else{for(var p=0;p<o.output_values.length;p++)o.output_values[p]=0;for(var v=0;v<o.output_covariance.length;v++)o.output_covariance[v]=0;for(var b=0;b<t.models.length;b++)for(var g=0;g<l;g++)if(o.output_values[g]+=o.smoothed_normalized_likelihoods[b]*o.singleClassHmmModelResults[b].output_values[g],0===t.configuration.covariance_mode)for(var y=0;y<l;y++)o.output_covariance[g*l+y]+=o.smoothed_normalized_likelihoods[b]*o.singleClassHmmModelResults[b].output_covariance[g*l+y];else o.output_covariance[g]+=o.smoothed_normalized_likelihoods[b]*o.singleClassHmmModelResults[b].output_covariance[g]}}}},{"./gmm-utils":6}],8:[function(e,t,o){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":17}],9:[function(e,t,o){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":18}],10:[function(e,t,o){t.exports={default:e("core-js/library/fn/number/is-integer"),__esModule:!0}},{"core-js/library/fn/number/is-integer":19}],11:[function(e,t,o){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":20}],12:[function(e,t,o){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":21}],13:[function(e,t,o){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":22}],14:[function(e,t,o){"use strict";o.__esModule=!0,o.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],15:[function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}o.__esModule=!0;var r=e("../core-js/object/define-property"),n=i(r);o.default=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}()},{"../core-js/object/define-property":11}],16:[function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}o.__esModule=!0;var r=e("../core-js/symbol/iterator"),n=i(r),s=e("../core-js/symbol"),a=i(s),l="function"==typeof a.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};o.default="function"==typeof a.default&&"symbol"===l(n.default)?function(e){return"undefined"==typeof e?"undefined":l(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":"undefined"==typeof e?"undefined":l(e)}},{"../core-js/symbol":12,"../core-js/symbol/iterator":13}],17:[function(e,t,o){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":82,"../modules/es6.string.iterator":87,"../modules/web.dom.iterable":91}],18:[function(e,t,o){var i=e("../../modules/_core"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(e){return r.stringify.apply(r,arguments)}},{"../../modules/_core":29}],19:[function(e,t,o){e("../../modules/es6.number.is-integer"),t.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":29,"../../modules/es6.number.is-integer":84}],20:[function(e,t,o){e("../../modules/es6.object.define-property");var i=e("../../modules/_core").Object;t.exports=function(e,t,o){return i.defineProperty(e,t,o)}},{"../../modules/_core":29,"../../modules/es6.object.define-property":85}],21:[function(e,t,o){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":29,"../../modules/es6.object.to-string":86,"../../modules/es6.symbol":88,"../../modules/es7.symbol.async-iterator":89,"../../modules/es7.symbol.observable":90}],22:[function(e,t,o){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":79,"../../modules/es6.string.iterator":87,"../../modules/web.dom.iterable":91}],23:[function(e,t,o){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],24:[function(e,t,o){t.exports=function(){}},{}],25:[function(e,t,o){var i=e("./_is-object");t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":46}],26:[function(e,t,o){var i=e("./_to-iobject"),r=e("./_to-length"),n=e("./_to-index");t.exports=function(e){return function(t,o,s){var a,l=i(t),u=r(l.length),d=n(s,u);if(e&&o!=o){for(;u>d;)if(a=l[d++],a!=a)return!0}else for(;u>d;d++)if((e||d in l)&&l[d]===o)return e||d||0;return!e&&-1}}},{"./_to-index":71,"./_to-iobject":73,"./_to-length":74}],27:[function(e,t,o){var i=e("./_cof"),r=e("./_wks")("toStringTag"),n="Arguments"==i(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,o,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=s(t=Object(e),r))?o:n?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":28,"./_wks":80}],28:[function(e,t,o){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],29:[function(e,t,o){var i=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},{}],30:[function(e,t,o){var i=e("./_a-function");t.exports=function(e,t,o){if(i(e),void 0===t)return e;switch(o){case 1:return function(o){return e.call(t,o)};case 2:return function(o,i){return e.call(t,o,i)};case 3:return function(o,i,r){return e.call(t,o,i,r)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":23}],31:[function(e,t,o){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],32:[function(e,t,o){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":37}],33:[function(e,t,o){var i=e("./_is-object"),r=e("./_global").document,n=i(r)&&i(r.createElement);t.exports=function(e){return n?r.createElement(e):{}}},{"./_global":38,"./_is-object":46}],34:[function(e,t,o){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],35:[function(e,t,o){var i=e("./_object-keys"),r=e("./_object-gops"),n=e("./_object-pie");t.exports=function(e){var t=i(e),o=r.f;if(o)for(var s,a=o(e),l=n.f,u=0;a.length>u;)l.call(e,s=a[u++])&&t.push(s);return t}},{"./_object-gops":60,"./_object-keys":63,"./_object-pie":64}],36:[function(e,t,o){var i=e("./_global"),r=e("./_core"),n=e("./_ctx"),s=e("./_hide"),a="prototype",l=function(e,t,o){var u,d,_,c=e&l.F,f=e&l.G,h=e&l.S,m=e&l.P,p=e&l.B,v=e&l.W,b=f?r:r[t]||(r[t]={}),g=b[a],y=f?i:h?i[t]:(i[t]||{})[a];f&&(o=t);for(u in o)d=!c&&y&&void 0!==y[u],d&&u in b||(_=d?y[u]:o[u],b[u]=f&&"function"!=typeof y[u]?o[u]:p&&d?n(_,i):v&&y[u]==_?function(e){var t=function(t,o,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,o)}return new e(t,o,i)}return e.apply(this,arguments)};return t[a]=e[a],t}(_):m&&"function"==typeof _?n(Function.call,_):_,m&&((b.virtual||(b.virtual={}))[u]=_,e&l.R&&g&&!g[u]&&s(g,u,_)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":29,"./_ctx":30,"./_global":38,"./_hide":40}],37:[function(e,t,o){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],38:[function(e,t,o){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],39:[function(e,t,o){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],40:[function(e,t,o){var i=e("./_object-dp"),r=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,o){return i.f(e,t,r(1,o))}:function(e,t,o){return e[t]=o,e}},{"./_descriptors":32,"./_object-dp":55,"./_property-desc":65}],41:[function(e,t,o){t.exports=e("./_global").document&&document.documentElement},{"./_global":38}],42:[function(e,t,o){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":32,"./_dom-create":33,"./_fails":37}],43:[function(e,t,o){var i=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{"./_cof":28}],44:[function(e,t,o){var i=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==i(e)}},{"./_cof":28}],45:[function(e,t,o){var i=e("./_is-object"),r=Math.floor;t.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},{"./_is-object":46}],46:[function(e,t,o){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],47:[function(e,t,o){"use strict";var i=e("./_object-create"),r=e("./_property-desc"),n=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,o){e.prototype=i(s,{next:r(1,o)}),n(e,t+" Iterator")}},{"./_hide":40,"./_object-create":54,"./_property-desc":65,"./_set-to-string-tag":67,"./_wks":80}],48:[function(e,t,o){"use strict";var i=e("./_library"),r=e("./_export"),n=e("./_redefine"),s=e("./_hide"),a=e("./_has"),l=e("./_iterators"),u=e("./_iter-create"),d=e("./_set-to-string-tag"),_=e("./_object-gpo"),c=e("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",m="keys",p="values",v=function(){return this};t.exports=function(e,t,o,b,g,y,k){u(o,t,b);var w,j,x,M=function(e){if(!f&&e in P)return P[e];switch(e){case m:return function(){return new o(this,e)};case p:return function(){return new o(this,e)}}return function(){return new o(this,e)}},O=t+" Iterator",R=g==p,C=!1,P=e.prototype,A=P[c]||P[h]||g&&P[g],S=A||M(g),z=g?R?M("entries"):S:void 0,I="Array"==t?P.entries||A:A;if(I&&(x=_(I.call(new e)),x!==Object.prototype&&(d(x,O,!0),i||a(x,c)||s(x,c,v))),R&&A&&A.name!==p&&(C=!0,S=function(){return A.call(this)}),i&&!k||!f&&!C&&P[c]||s(P,c,S),l[t]=S,l[O]=v,g)if(w={values:R?S:M(p),keys:y?S:M(m),entries:z},k)for(j in w)j in P||n(P,j,w[j]);else r(r.P+r.F*(f||C),t,w);return w}},{"./_export":36,"./_has":39,"./_hide":40,"./_iter-create":47,"./_iterators":50,"./_library":52,"./_object-gpo":61,"./_redefine":66,"./_set-to-string-tag":67,"./_wks":80}],49:[function(e,t,o){t.exports=function(e,t){return{value:t,done:!!e}}},{}],50:[function(e,t,o){t.exports={}},{}],51:[function(e,t,o){var i=e("./_object-keys"),r=e("./_to-iobject");t.exports=function(e,t){for(var o,n=r(e),s=i(n),a=s.length,l=0;a>l;)if(n[o=s[l++]]===t)return o}},{"./_object-keys":63,"./_to-iobject":73}],52:[function(e,t,o){t.exports=!0},{}],53:[function(e,t,o){var i=e("./_uid")("meta"),r=e("./_is-object"),n=e("./_has"),s=e("./_object-dp").f,a=0,l=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),d=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},_=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,i)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[i].i},c=function(e,t){if(!n(e,i)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[i].w},f=function(e){return u&&h.NEED&&l(e)&&!n(e,i)&&d(e),e},h=t.exports={KEY:i,NEED:!1,fastKey:_,getWeak:c,onFreeze:f}},{"./_fails":37,"./_has":39,"./_is-object":46,"./_object-dp":55,"./_uid":77}],54:[function(e,t,o){var i=e("./_an-object"),r=e("./_object-dps"),n=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},l="prototype",u=function(){var t,o=e("./_dom-create")("iframe"),i=n.length,r="<",s=">";for(o.style.display="none",e("./_html").appendChild(o),o.src="javascript:",t=o.contentWindow.document,t.open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),u=t.F;i--;)delete u[l][n[i]];return u()};t.exports=Object.create||function(e,t){var o;return null!==e?(a[l]=i(e),o=new a,a[l]=null,o[s]=e):o=u(),void 0===t?o:r(o,t)}},{"./_an-object":25,"./_dom-create":33,"./_enum-bug-keys":34,"./_html":41,"./_object-dps":56,"./_shared-key":68}],55:[function(e,t,o){var i=e("./_an-object"),r=e("./_ie8-dom-define"),n=e("./_to-primitive"),s=Object.defineProperty;o.f=e("./_descriptors")?Object.defineProperty:function(e,t,o){if(i(e),t=n(t,!0),i(o),r)try{return s(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e}},{"./_an-object":25,"./_descriptors":32,"./_ie8-dom-define":42,"./_to-primitive":76}],56:[function(e,t,o){var i=e("./_object-dp"),r=e("./_an-object"),n=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){r(e);for(var o,s=n(t),a=s.length,l=0;a>l;)i.f(e,o=s[l++],t[o]);return e}},{"./_an-object":25,"./_descriptors":32,"./_object-dp":55,"./_object-keys":63}],57:[function(e,t,o){var i=e("./_object-pie"),r=e("./_property-desc"),n=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),l=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;o.f=e("./_descriptors")?u:function(e,t){if(e=n(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(a(e,t))return r(!i.f.call(e,t),e[t])}},{"./_descriptors":32,"./_has":39,"./_ie8-dom-define":42,"./_object-pie":64,"./_property-desc":65,"./_to-iobject":73,"./_to-primitive":76}],58:[function(e,t,o){var i=e("./_to-iobject"),r=e("./_object-gopn").f,n={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(e){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==n.call(e)?a(e):r(i(e))}},{"./_object-gopn":59,"./_to-iobject":73}],59:[function(e,t,o){var i=e("./_object-keys-internal"),r=e("./_enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},{"./_enum-bug-keys":34,"./_object-keys-internal":62}],60:[function(e,t,o){o.f=Object.getOwnPropertySymbols},{}],61:[function(e,t,o){var i=e("./_has"),r=e("./_to-object"),n=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,n)?e[n]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":39,"./_shared-key":68,"./_to-object":75}],62:[function(e,t,o){var i=e("./_has"),r=e("./_to-iobject"),n=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var o,a=r(e),l=0,u=[];for(o in a)o!=s&&i(a,o)&&u.push(o);for(;t.length>l;)i(a,o=t[l++])&&(~n(u,o)||u.push(o));return u}},{"./_array-includes":26,"./_has":39,"./_shared-key":68,"./_to-iobject":73}],63:[function(e,t,o){var i=e("./_object-keys-internal"),r=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return i(e,r)}},{"./_enum-bug-keys":34,"./_object-keys-internal":62}],64:[function(e,t,o){o.f={}.propertyIsEnumerable},{}],65:[function(e,t,o){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],66:[function(e,t,o){t.exports=e("./_hide")},{"./_hide":40}],67:[function(e,t,o){var i=e("./_object-dp").f,r=e("./_has"),n=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!r(e=o?e:e.prototype,n)&&i(e,n,{configurable:!0,value:t})}},{"./_has":39,"./_object-dp":55,"./_wks":80}],68:[function(e,t,o){var i=e("./_shared")("keys"),r=e("./_uid");t.exports=function(e){return i[e]||(i[e]=r(e))}},{"./_shared":69,"./_uid":77}],69:[function(e,t,o){var i=e("./_global"),r="__core-js_shared__",n=i[r]||(i[r]={});t.exports=function(e){return n[e]||(n[e]={})}},{"./_global":38}],70:[function(e,t,o){var i=e("./_to-integer"),r=e("./_defined");t.exports=function(e){return function(t,o){var n,s,a=String(r(t)),l=i(o),u=a.length;return l<0||l>=u?e?"":void 0:(n=a.charCodeAt(l),n<55296||n>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):n:e?a.slice(l,l+2):(n-55296<<10)+(s-56320)+65536)}}},{"./_defined":31,"./_to-integer":72}],71:[function(e,t,o){var i=e("./_to-integer"),r=Math.max,n=Math.min;t.exports=function(e,t){return e=i(e),e<0?r(e+t,0):n(e,t)}},{"./_to-integer":72}],72:[function(e,t,o){var i=Math.ceil,r=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?r:i)(e)}},{}],73:[function(e,t,o){var i=e("./_iobject"),r=e("./_defined");t.exports=function(e){return i(r(e))}},{"./_defined":31,"./_iobject":43}],74:[function(e,t,o){var i=e("./_to-integer"),r=Math.min;t.exports=function(e){return e>0?r(i(e),9007199254740991):0}},{"./_to-integer":72}],75:[function(e,t,o){var i=e("./_defined");t.exports=function(e){return Object(i(e))}},{"./_defined":31}],76:[function(e,t,o){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var o,r;if(t&&"function"==typeof(o=e.toString)&&!i(r=o.call(e)))return r;if("function"==typeof(o=e.valueOf)&&!i(r=o.call(e)))return r;if(!t&&"function"==typeof(o=e.toString)&&!i(r=o.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":46}],77:[function(e,t,o){var i=0,r=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+r).toString(36))}},{}],78:[function(e,t,o){var i=e("./_global"),r=e("./_core"),n=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=r.Symbol||(r.Symbol=n?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":29,"./_global":38,"./_library":52,"./_object-dp":55,"./_wks-ext":79}],79:[function(e,t,o){o.f=e("./_wks")},{"./_wks":80}],80:[function(e,t,o){var i=e("./_shared")("wks"),r=e("./_uid"),n=e("./_global").Symbol,s="function"==typeof n,a=t.exports=function(e){return i[e]||(i[e]=s&&n[e]||(s?n:r)("Symbol."+e))};a.store=i},{"./_global":38,"./_shared":69,"./_uid":77}],81:[function(e,t,o){var i=e("./_classof"),r=e("./_wks")("iterator"),n=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||n[i(e)]}},{"./_classof":27,"./_core":29,"./_iterators":50,"./_wks":80}],82:[function(e,t,o){var i=e("./_an-object"),r=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},{"./_an-object":25,"./_core":29,"./core.get-iterator-method":81}],83:[function(e,t,o){"use strict";var i=e("./_add-to-unscopables"),r=e("./_iter-step"),n=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,o):"values"==t?r(0,e[o]):r(0,[o,e[o]])},"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},{"./_add-to-unscopables":24,"./_iter-define":48,"./_iter-step":49,"./_iterators":50,"./_to-iobject":73}],84:[function(e,t,o){var i=e("./_export");i(i.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":36,"./_is-integer":45}],85:[function(e,t,o){var i=e("./_export");i(i.S+i.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":32,"./_export":36,"./_object-dp":55}],86:[function(e,t,o){},{}],87:[function(e,t,o){"use strict";var i=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=i(t,o),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":48,"./_string-at":70}],88:[function(e,t,o){"use strict";var i=e("./_global"),r=e("./_has"),n=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),l=e("./_meta").KEY,u=e("./_fails"),d=e("./_shared"),_=e("./_set-to-string-tag"),c=e("./_uid"),f=e("./_wks"),h=e("./_wks-ext"),m=e("./_wks-define"),p=e("./_keyof"),v=e("./_enum-keys"),b=e("./_is-array"),g=e("./_an-object"),y=e("./_to-iobject"),k=e("./_to-primitive"),w=e("./_property-desc"),j=e("./_object-create"),x=e("./_object-gopn-ext"),M=e("./_object-gopd"),O=e("./_object-dp"),R=e("./_object-keys"),C=M.f,P=O.f,A=x.f,S=i.Symbol,z=i.JSON,I=z&&z.stringify,N="prototype",E=f("_hidden"),F=f("toPrimitive"),W={}.propertyIsEnumerable,L=d("symbol-registry"),H=d("symbols"),G=d("op-symbols"),T=Object[N],U="function"==typeof S,J=i.QObject,B=!J||!J[N]||!J[N].findChild,D=n&&u(function(){return 7!=j(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,o){var i=C(T,t);i&&delete T[t],P(e,t,o),i&&e!==T&&P(T,t,i)}:P,q=function(e){var t=H[e]=j(S[N]);return t._k=e,t},V=U&&"symbol"==typeof S.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof S},K=function(e,t,o){return e===T&&K(G,t,o),g(e),t=k(t,!0),g(o),r(H,t)?(o.enumerable?(r(e,E)&&e[E][t]&&(e[E][t]=!1),o=j(o,{enumerable:w(0,!1)})):(r(e,E)||P(e,E,w(1,{})),e[E][t]=!0),D(e,t,o)):P(e,t,o)},Y=function(e,t){g(e);for(var o,i=v(t=y(t)),r=0,n=i.length;n>r;)K(e,o=i[r++],t[o]);return e},Q=function(e,t){return void 0===t?j(e):Y(j(e),t)},X=function(e){var t=W.call(this,e=k(e,!0));return!(this===T&&r(H,e)&&!r(G,e))&&(!(t||!r(this,e)||!r(H,e)||r(this,E)&&this[E][e])||t)},Z=function(e,t){if(e=y(e),t=k(t,!0),e!==T||!r(H,t)||r(G,t)){var o=C(e,t);return!o||!r(H,t)||r(e,E)&&e[E][t]||(o.enumerable=!0),o}},$=function(e){for(var t,o=A(y(e)),i=[],n=0;o.length>n;)r(H,t=o[n++])||t==E||t==l||i.push(t);return i},ee=function(e){for(var t,o=e===T,i=A(o?G:y(e)),n=[],s=0;i.length>s;)!r(H,t=i[s++])||o&&!r(T,t)||n.push(H[t]);return n};U||(S=function(){if(this instanceof S)throw TypeError("Symbol is not a constructor!");var e=c(arguments.length>0?arguments[0]:void 0),t=function(o){this===T&&t.call(G,o),r(this,E)&&r(this[E],e)&&(this[E][e]=!1),D(this,e,w(1,o))};return n&&B&&D(T,e,{configurable:!0,set:t}),q(e)},a(S[N],"toString",function(){return this._k}),M.f=Z,O.f=K,e("./_object-gopn").f=x.f=$,e("./_object-pie").f=X,e("./_object-gops").f=ee,n&&!e("./_library")&&a(T,"propertyIsEnumerable",X,!0),h.f=function(e){return q(f(e))}),s(s.G+s.W+s.F*!U,{Symbol:S});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),oe=0;te.length>oe;)f(te[oe++]);for(var te=R(f.store),oe=0;te.length>oe;)m(te[oe++]);s(s.S+s.F*!U,"Symbol",{for:function(e){return r(L,e+="")?L[e]:L[e]=S(e)},keyFor:function(e){if(V(e))return p(L,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){B=!0},useSimple:function(){B=!1}}),s(s.S+s.F*!U,"Object",{create:Q,defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:ee}),z&&s(s.S+s.F*(!U||u(function(){var e=S();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,o,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(o=t),!o&&b(t)||(t=function(e,t){if(o&&(t=o.call(this,e,t)),!V(t))return t}),i[1]=t,I.apply(z,i)}}}),S[N][F]||e("./_hide")(S[N],F,S[N].valueOf),_(S,"Symbol"),_(Math,"Math",!0),_(i.JSON,"JSON",!0)},{"./_an-object":25,"./_descriptors":32,"./_enum-keys":35,"./_export":36,"./_fails":37,"./_global":38,"./_has":39,"./_hide":40,"./_is-array":44,"./_keyof":51,"./_library":52,"./_meta":53,"./_object-create":54,"./_object-dp":55,"./_object-gopd":57,"./_object-gopn":59,"./_object-gopn-ext":58,"./_object-gops":60,"./_object-keys":63,"./_object-pie":64,"./_property-desc":65,"./_redefine":66,"./_set-to-string-tag":67,"./_shared":69,"./_to-iobject":73,"./_to-primitive":76,"./_uid":77,"./_wks":80,"./_wks-define":78,"./_wks-ext":79}],89:[function(e,t,o){e("./_wks-define")("asyncIterator")},{"./_wks-define":78}],90:[function(e,t,o){e("./_wks-define")("observable")},{"./_wks-define":78}],91:[function(e,t,o){e("./es6.array.iterator");for(var i=e("./_global"),r=e("./_hide"),n=e("./_iterators"),s=e("./_wks")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=a[l],d=i[u],_=d&&d.prototype;_&&!_[s]&&r(_,s,u),n[u]=n.Array}},{"./_global":38,"./_hide":40,"./_iterators":50,"./_wks":80,"./es6.array.iterator":83}]},{},[3])(3)});